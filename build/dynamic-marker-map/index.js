(()=>{"use strict";var e,r={910:()=>{const e=window.wp.blocks,r=window.wp.i18n,a=window.wp.blockEditor,t=window.wp.components,n=window.ReactJSXRuntime,i=JSON.parse('{"UU":"create-block/dynamic-marker-map"}');(0,e.registerBlockType)(i.UU,{edit:function({attributes:e,setAttributes:i}){const{mapImageUrl:l,markerIconUrl:o,locations:s=[]}=e,[c,m]=React.useState(!1),p=(e,r,a)=>{const t=[...s];t[e][r]=a,i({locations:t})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a.InspectorControls,{children:[(0,n.jsxs)(t.PanelBody,{title:(0,r.__)("Map Settings","dynamic-marker-map"),children:[(0,n.jsx)(a.MediaUploadCheck,{children:(0,n.jsx)(a.MediaUpload,{onSelect:e=>i({mapImageUrl:e.url}),allowedTypes:["image"],render:({open:e})=>(0,n.jsxs)("div",{children:[(0,n.jsx)(t.Button,{onClick:e,isPrimary:!0,children:(0,r.__)("Select Map Image","dynamic-marker-map")}),l&&(0,n.jsx)("img",{src:l,alt:(0,r.__)("Map Image","dynamic-marker-map"),style:{width:"100%",marginTop:"10px"}})]})})}),(0,n.jsx)(a.MediaUploadCheck,{children:(0,n.jsx)(a.MediaUpload,{onSelect:e=>i({markerIconUrl:e.url}),allowedTypes:["image"],render:({open:e})=>(0,n.jsxs)("div",{style:{alignItems:"center",display:"flex",marginTop:"20px"},children:[(0,n.jsx)(t.Button,{onClick:e,isPrimary:!0,children:(0,r.__)("Select Marker Image","dynamic-marker-map")}),o&&(0,n.jsx)("img",{src:o,alt:(0,r.__)("Marker Image","dynamic-marker-map"),style:{width:"24px",marginLeft:"10px"}})]})})})]}),(0,n.jsx)(t.PanelBody,{title:(0,r.__)("Add Marker by Click","dynamic-marker-map"),children:(0,n.jsx)(t.ToggleControl,{label:(0,r.__)("Enable Add Marker by Click","dynamic-marker-map"),checked:c,onChange:()=>m(!c)})}),(0,n.jsx)(t.PanelBody,{title:(0,r.__)("Locations","dynamic-marker-map"),children:s.map(((e,a)=>(0,n.jsxs)("div",{style:{marginTop:"15px",padding:"10px",border:"1px solid #ccc"},children:[(0,n.jsx)(t.TextControl,{label:(0,r.__)("Top Position (%)","dynamic-marker-map"),value:e.top,onChange:e=>p(a,"top",e)}),(0,n.jsx)(t.TextControl,{label:(0,r.__)("Left Position (%)","dynamic-marker-map"),value:e.left,onChange:e=>p(a,"left",e)}),(0,n.jsx)(t.TextControl,{label:(0,r.__)("URL","dynamic-marker-map"),value:e.url,onChange:e=>p(a,"url",e)}),(0,n.jsx)(t.TextControl,{label:(0,r.__)("Tooltip","dynamic-marker-map"),value:e.tooltip,onChange:e=>p(a,"tooltip",e)}),(0,n.jsx)(t.Button,{onClick:()=>(e=>{const r=s.filter(((r,a)=>a!==e));i({locations:r})})(a),isDestructive:!0,style:{marginTop:"10px"},children:(0,r.__)("Remove Marker","dynamic-marker-map")})]},a)))})]}),(0,n.jsx)("div",{...(0,a.useBlockProps)(),children:(0,n.jsxs)("div",{className:"map-container",onClick:e=>{if(!c)return;const r=e.target.closest(".map-container");if(!r)return;const a=r.getBoundingClientRect(),t=(e.clientY-a.top)/a.height*100,n=(e.clientX-a.left)/a.width*100;((e,r)=>{i({locations:[...s,{top:`${e}%`,left:`${r}%`,url:"",tooltip:""}]})})(t.toFixed(2),n.toFixed(2))},style:{position:"relative"},children:[l&&(0,n.jsx)("img",{src:l,alt:"Map",style:{width:"100%"}}),(0,n.jsx)("div",{className:"markers",children:s.map(((e,r)=>(0,n.jsx)("div",{className:"marker",style:{position:"absolute",top:e.top,left:e.left,backgroundImage:`url(${o})`,width:"24px",height:"24px",backgroundSize:"cover",transform:"translate(-50%, -50%)"},children:(0,n.jsx)("span",{className:"tooltip",children:e.tooltip})},r)))})]})})]})},save:function({attributes:e}){const{mapImageUrl:r,markerIconUrl:t,locations:i}=e;return(0,n.jsx)("div",{...a.useBlockProps.save(),children:(0,n.jsxs)("div",{className:"map-container",children:[r&&(0,n.jsx)("img",{src:r,alt:"Map"}),(0,n.jsx)("div",{className:"markers",children:i.map(((e,r)=>(0,n.jsx)("a",{href:e.url||"#",className:"marker",style:{top:e.top,left:e.left,backgroundImage:`url(${t})`},target:"_parent",rel:"noopener noreferrer",children:(0,n.jsx)("span",{className:"tooltip",children:e.tooltip})},r)))})]})})}})}},a={};function t(e){var n=a[e];if(void 0!==n)return n.exports;var i=a[e]={exports:{}};return r[e](i,i.exports,t),i.exports}t.m=r,e=[],t.O=(r,a,n,i)=>{if(!a){var l=1/0;for(m=0;m<e.length;m++){for(var[a,n,i]=e[m],o=!0,s=0;s<a.length;s++)(!1&i||l>=i)&&Object.keys(t.O).every((e=>t.O[e](a[s])))?a.splice(s--,1):(o=!1,i<l&&(l=i));if(o){e.splice(m--,1);var c=n();void 0!==c&&(r=c)}}return r}i=i||0;for(var m=e.length;m>0&&e[m-1][2]>i;m--)e[m]=e[m-1];e[m]=[a,n,i]},t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{var e={685:0,225:0};t.O.j=r=>0===e[r];var r=(r,a)=>{var n,i,[l,o,s]=a,c=0;if(l.some((r=>0!==e[r]))){for(n in o)t.o(o,n)&&(t.m[n]=o[n]);if(s)var m=s(t)}for(r&&r(a);c<l.length;c++)i=l[c],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(m)},a=globalThis.webpackChunkdynamic_marker_map=globalThis.webpackChunkdynamic_marker_map||[];a.forEach(r.bind(null,0)),a.push=r.bind(null,a.push.bind(a))})();var n=t.O(void 0,[225],(()=>t(910)));n=t.O(n)})();